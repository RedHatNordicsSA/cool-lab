# Generated by Anaconda 34.25.4.9
# Generated by pykickstart v3.32
#version=RHEL9
# Use graphical install
graphical
repo --name="AppStream" --baseurl=file:///run/install/sources/mount-0001-cdrom/AppStream

%addon com_redhat_kdump --disable

%end

%addon com_redhat_oscap
    content-type = scap-security-guide
    datastream-id = scap_org.open-scap_datastream_from_xccdf_ssg-rhel9-xccdf.xml
    xccdf-id = scap_org.open-scap_cref_ssg-rhel9-xccdf.xml
    profile = xccdf_org.ssgproject.content_profile_stig
%end

# Keyboard layouts
keyboard --xlayouts='fi'
# System language
lang en_US.UTF-8

# Network information
network  --bootproto=dhcp --device=ens192 --ipv6=auto --activate
network  --hostname=rh-ocpmirror-02

# Use CDROM installation media
cdrom

%packages
@^minimal-environment
aide
audispd-plugins
audit
chrony
crypto-policies
fapolicyd
firewalld
gnutls-utils
libreswan
nss-tools
opensc
openscap
openscap-scanner
openssh-clients
openssh-server
openssl-pkcs11
pcsc-lite
policycoreutils
policycoreutils-python-utils
rng-tools
rsyslog
rsyslog-gnutls
s-nail
scap-security-guide
subscription-manager
sudo
tmux
usbguard
-iprutils
-nfs-utils
-quagga
-rsh-server
-sendmail
-telnet-server
-tftp-server
-tuned
-vsftpd
-xorg-x11-server-Xorg
-xorg-x11-server-Xwayland
-xorg-x11-server-common
-xorg-x11-server-utils
-ypserv

%end

# Run the Setup Agent on first boot
firstboot --enable

# Generated using Blivet version 3.6.0
ignoredisk --only-use=sda,sdb
# Partition clearing information
clearpart --none --initlabel
# Disk partitioning information
part /boot/efi --fstype="efi" --size=1024 --fsoptions="umask=0077,shortname=winnt"
part /boot --fstype="xfs" --size=3072
part pv.174 --fstype="lvmpv" --ondisk=sda --size=97802
part pv.181 --fstype="lvmpv" --ondisk=sdb --size=306698
volgroup rhel_rh-ocpmirror-02 --pesize=4096 pv.174 pv.181
logvol /home --fstype="xfs" --size=307200 --encrypted --luks-version=luks2 --name=home --vgname=rhel_rh-ocpmirror-02
logvol /var/log/audit --fstype="xfs" --size=5120 --encrypted --luks-version=luks2 --name=var_log_audit --vgname=rhel_rh-ocpmirror-02
logvol swap --fstype="swap" --size=5120 --encrypted --luks-version=luks2 --name=swap --vgname=rhel_rh-ocpmirror-02
logvol /var/tmp --fstype="xfs" --size=5120 --encrypted --luks-version=luks2 --name=var_tmp --vgname=rhel_rh-ocpmirror-02
logvol /var/log --fstype="xfs" --size=10240 --encrypted --luks-version=luks2 --name=var_log --vgname=rhel_rh-ocpmirror-02
logvol /var --fstype="xfs" --size=30720 --encrypted --luks-version=luks2 --name=var --vgname=rhel_rh-ocpmirror-02
logvol /tmp --fstype="xfs" --size=10240 --encrypted --luks-version=luks2 --name=tmp --vgname=rhel_rh-ocpmirror-02
logvol / --fstype="xfs" --size=30720 --encrypted --luks-version=luks2 --name=root --vgname=rhel_rh-ocpmirror-02

timesource --ntp-server=arw-ntp-01.arrowdemo.se
# System timezone
timezone Europe/Helsinki --utc

# Root password
rootpw --iscrypted $6$ziR2x7j7SdXW1r7y$FSWO8OeWZvinAcVaM8Clb.cI4BestXx7wlWY7nwXIaVPgyZOlcft/Kp9kAKr2b.TfecLqGdtLqrOHHvSih5MP1
user --groups=wheel --name=redhat --password=$6$2v4xpZCpA12gTHeG$9aVgcWOZzf4UxuC4wMKSerjEyHdXb/eW24/KQQtGKqhdEB87Seh8hRfZfwhAFyNdRwMkLdvliHX0uMS1G3yH5/ --iscrypted --gecos="redhat"

